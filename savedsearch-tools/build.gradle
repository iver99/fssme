apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'maven'
apply plugin: 'maven-publish'
apply plugin: 'artifactory-publish'

jar.archiveName='UpdateSavedSearch.jar'

task runUpdateSearchUtilTestSuite(type: Test){
        useTestNG(){
        dependsOn ':savedsearch-tools:jar'
        useDefaultListeners = true
        outputDirectory = file("$buildDir/testngoutput")
        suites file('savedsearchutil_testng_suite.xml')
        }
}

sourceSets {
                test{
                    java {
                              srcDirs = ['src/test/java']
                    }
                    resources.srcDirs = ['src/test/java']
                }
			}

dependencies {
	
	compile(group: 'org.apache.commons', name:'commons-lang3', version:'3.1')
	compile(group: 'org.hamcrest', name:'hamcrest-core', version: '1.3')
	compile(group: 'org.apache.httpcomponents', name:'httpclient', version:'4.3.1')
	compile(group: 'org.apache.httpcomponents', name:'httpcore', version:'4.3')
	compile(group: 'org.apache.httpcomponents', name:'httpmime', version:'4.3.1')	
	compile(group: 'org.codehaus.jackson', name: 'jackson-core-asl', version: '1.9.1')
	compile(group: 'org.codehaus.jackson', name: 'jackson-mapper-asl', version: '1.9.12')
	
	compile(group: 'org.codehaus.jettison', name: 'jettison', version: '1.1')
	compile(group: 'com.jayway.restassured', name:'json-path', version:'1.8.1')
	compile(group: 'log4j', name: 'log4j', version: '1.2.17')
    compile(group: 'emaas.platform', name: 'registry-client', version: '0.4')
	compile(group: 'emaas.platform', name: 'registry-lookup-client', version: '0.3')    
	compile(group: 'com.jayway.restassured', name:'rest-assured', version:'2.3.1')
	compile(group: 'com.jayway.restassured', name:'rest-assured-common', version:'2.3.1')	
	compile(group: 'com.jayway.restassured', name:'xml-path', version:'1.9.0')	
	compile(group: 'org.codehaus.groovy', name:'groovy-all', version:'2.2.1')	
	compile(group: 'org.apache.commons', name:'commons-lang3', version:'3.1')
	compile(group: 'com.jayway.restassured', name:'json-path', version:'1.8.1')
	compile(group: 'org.testng', name:'testng', version:'6.8.8')
}


version = '0.1'
jar {
            manifest
             {
            	attributes("Manifest-Version"       : "1.0",                
                "Main-Class"             : "oracle.sysman.emSDK.emaas.platform.updatesavedsearch.UpdateSavedSearch",
                "Class-Path"             :  "."
           				  )
            }   
           
       from 
       {
	        configurations.runtime.collect 
	        {
	            it.isDirectory() ? it : zipTree(it)
	        }
        }
    
     from('src/main/java')  
     {
        include 'log4j_ssf.properties'
     }
     
     from('src/main/java')  
     {
        include 'help.txt'
     }
}
